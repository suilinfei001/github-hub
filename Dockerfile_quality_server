FROM alpine:3.19
RUN addgroup -S app && adduser -S -G app app
WORKDIR /app
COPY bin/quality-server /app/
COPY internal/quality/data /usr/local/share/quality-data
RUN chmod +x /app/quality-server && \
    mkdir -p /data && chown -R app:app /data /app
USER app
EXPOSE 5001
VOLUME ["/data"]
ENV GITHUB_TOKEN=""
CMD ["/app/quality-server", "-addr", ":5001"]
